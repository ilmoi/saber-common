{"version":3,"file":"printInstructionLogs.js","sourceRoot":"","sources":["../../src/printInstructionLogs.ts"],"names":[],"mappings":";;;;AACA,4DAA+E;AAE/E,qEAAmD;AAEnD;;;GAGG;AACI,MAAM,+BAA+B,GAAG,CAC7C,IAAgC,EACxB,EAAE,CACV,IAAI;KACD,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE;IACd,OAAO;QACL;YACE,iBAAM,CAAC,IAAI,CAAC,iBAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC/B,iBAAM,CAAC,IAAI,CAAC,iBAAM,CAAC,KAAK,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;YAChD,GAAG,CAAC,cAAc;gBAChB,CAAC,CAAC,iBAAM,CAAC,MAAM,CAAC,WAAW,GAAG,CAAC,cAAc,EAAE,CAAC;gBAChD,CAAC,CAAC,QAAQ;SACb,CAAC,IAAI,CAAC,EAAE,CAAC;QACV,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE;YACxB,MAAM,QAAQ,GAAG,IAAA,+BAAc,EAAC,KAAK,EAAE,IAAI,CAAC,CAAC;YAC7C,QAAQ,KAAK,CAAC,IAAI,EAAE;gBAClB,KAAK,MAAM;oBACT,OAAO,iBAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;gBAChC,KAAK,KAAK;oBACR,OAAO,iBAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC/B,KAAK,cAAc;oBACjB,OAAO,iBAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gBAC9B,KAAK,cAAc;oBACjB,OAAO,iBAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;gBAC9B,KAAK,QAAQ;oBACX,OAAO,iBAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;gBAChC,KAAK,SAAS;oBACZ,OAAO,iBAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;aACjC;QACH,CAAC,CAAC;KACH,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACf,CAAC,CAAC;KACD,IAAI,CAAC,IAAI,CAAC,CAAC;AAhCH,QAAA,+BAA+B,mCAgC5B;AAET,MAAM,yBAAyB,GAAG,CAAC,GAAyB,EAAE,EAAE;;IACrE,IAAI;QACF,MAAM,MAAM,GAAG,IAAA,qCAAoB,EAAC,MAAA,GAAG,CAAC,IAAI,mCAAI,IAAI,EAAE,GAAG,CAAC,CAAC;QAC3D,OAAO,CAAC,GAAG,CAAC,IAAA,uCAA+B,EAAC,MAAM,CAAC,CAAC,CAAC;KACtD;IAAC,OAAO,CAAC,EAAE;QACV,OAAO,CAAC,IAAI,CACV,iBAAM,CAAC,MAAM,CAAC,sDAAsD,CAAC,EACrE,CAAC,CACF,CAAC;QACF,OAAO,CAAC,GAAG,CAAC,MAAA,GAAG,CAAC,IAAI,0CAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;KACnC;AACH,CAAC,CAAC;AAXW,QAAA,yBAAyB,6BAWpC","sourcesContent":["import type { InstructionLogs } from \"@saberhq/solana-contrib\";\nimport { formatLogEntry, parseTransactionLogs } from \"@saberhq/solana-contrib\";\nimport type { SendTransactionError } from \"@solana/web3.js\";\nimport { default as colors } from \"colors/safe.js\";\n\n/**\n * Formats instruction logs to be printed to the console.\n * @param logs\n */\nexport const formatInstructionLogsForConsole = (\n  logs: readonly InstructionLogs[]\n): string =>\n  logs\n    .map((log, i) => {\n      return [\n        [\n          colors.bold(colors.blue(\"=> \")),\n          colors.bold(colors.white(`Instruction #${i}: `)),\n          log.programAddress\n            ? colors.yellow(`Program ${log.programAddress}`)\n            : \"System\",\n        ].join(\"\"),\n        ...log.logs.map((entry) => {\n          const entryStr = formatLogEntry(entry, true);\n          switch (entry.type) {\n            case \"text\":\n              return colors.white(entryStr);\n            case \"cpi\":\n              return colors.cyan(entryStr);\n            case \"programError\":\n              return colors.red(entryStr);\n            case \"runtimeError\":\n              return colors.red(entryStr);\n            case \"system\":\n              return colors.white(entryStr);\n            case \"success\":\n              return colors.green(entryStr);\n          }\n        }),\n      ].join(\"\\n\");\n    })\n    .join(\"\\n\");\n\nexport const printSendTransactionError = (err: SendTransactionError) => {\n  try {\n    const parsed = parseTransactionLogs(err.logs ?? null, err);\n    console.log(formatInstructionLogsForConsole(parsed));\n  } catch (e) {\n    console.warn(\n      colors.yellow(\"Could not print logs due to error. Printing raw logs\"),\n      e\n    );\n    console.log(err.logs?.join(\"\\n\"));\n  }\n};\n"]}